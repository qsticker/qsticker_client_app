(function(t){function e(e){for(var i,a,o=e[0],l=e[1],u=e[2],c=0,d=[];c<o.length;c++)a=o[c],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);h&&h(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,a=1;a<n.length;a++){var o=n[a];0!==r[o]&&(i=!1)}i&&(s.splice(e--,1),t=l(l.s=n[0]))}return t}var i={},a={app:0},r={app:0},s=[];function o(t){return l.p+"js/"+({}[t]||t)+"."+{"chunk-795df950":"72037edf"}[t]+".js"}function l(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(t){var e=[],n={"chunk-795df950":1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=new Promise((function(e,n){for(var i="css/"+({}[t]||t)+"."+{"chunk-795df950":"8a5e2d0b"}[t]+".css",r=l.p+i,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var u=s[o],c=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===i||c===r))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],c=u.getAttribute("data-href");if(c===i||c===r)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var i=e&&e.target&&e.target.src||r,s=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=i,delete a[t],h.parentNode.removeChild(h),n(s)},h.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){a[t]=0})));var i=r[t];if(0!==i)if(i)e.push(i[2]);else{var s=new Promise((function(e,n){i=r[t]=[e,n]}));e.push(i[2]=s);var u,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=o(t);var d=new Error;u=function(e){c.onerror=c.onload=null,clearTimeout(h);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",d.name="ChunkLoadError",d.type=i,d.request=a,n[1](d)}r[t]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:c})}),12e4);c.onerror=c.onload=u,document.head.appendChild(c)}return Promise.all(e)},l.m=t,l.c=i,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(n,i,function(e){return t[e]}.bind(null,i));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/",l.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var h=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0186":function(t,e,n){"use strict";var i;n.d(e,"a",(function(){return i})),function(t){t["SUBMMITED"]="SUBMMITED",t["TEMP_SUBMITTED"]="TEMP_SUBMITTED",t["STARTED"]="STARTED",t["EMPTY_INPUT"]="EMPTY_INPUT",t["NOT_EXISTING"]="NOT_EXISTING",t["INITIAL"]="INITIAL",t["NETWORK_ERROR"]="NETWORK_ERROR",t["TRY_AGAIN"]="TRY_AGAIN"}(i||(i={}))},"05f0":function(t,e,n){},"49f8":function(t,e,n){var i={"./en.json":"edd4","./th.json":"8680","./zh-TW.json":"9ea5"};function a(t){var e=r(t);return n(e)}function r(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=r,t.exports=a,a.id="49f8"},"58dc":function(t,e,n){t.exports=n.p+"img/illustration_eye_done.393c8645.png"},"5c0b":function(t,e,n){"use strict";n("9c0c")},"5c71":function(t,e,n){},"605f":function(t,e,n){},6131:function(t,e,n){"use strict";n("ae73")},6502:function(t,e,n){"use strict";n("e5d6")},"6ad1":function(t,e,n){"use strict";n("d3b7");var i=n("bc3a"),a=n.n(i),r=n("cd49"),s=a.a.create({baseURL:"https://api.qsticker.net/service/v1/",headers:{Accept:"application/json","Content-Type":"application/json"}});s.interceptors.response.use((function(t){return t}),(function(t){if("Network Error"===t.message)return r["default"].$notify({type:"error",title:"無法連線到伺服器",text:"請確認您的網路狀況是否正常"}),Promise.reject(t);var e="";switch(t.response.status){case 401:break;case 403:r["default"].$notify({type:"error",title:"錯誤",text:"您沒有此資源的存取權限"});break;default:break}return""!==e&&e!==r["default"].$router.currentRoute.path&&r["default"].$router.push(e),Promise.reject(t)})),e["a"]=s},"752c":function(t,e,n){},"7edb":function(t,e,n){"use strict";n("85c1")},"80a9":function(t,e,n){"use strict";n("8954")},"85c1":function(t,e,n){},8680:function(t){t.exports=JSON.parse('{"brandname":"QSticker","答題碼":"รหัสแบบทดสอบ","開始":"เริ่ม","答題碼不存在":"รหัสคำถามไม่ถูกต้อง","測驗已繳交":"ส่งแบบทดสอบแล้ว!","答題碼為空，請輸入答題碼":"กรุณากรอกรหัสควิซ!","language":"ภาษา","繳交":"ส่ง","單選題":"กรุณาเลือกหนึ่งคำตอบ","複選題":"โปรดเลือกมากกว่าหนึ่งคำตอบ","上一題":"ก่อนหน้า","下一題":"ถัดไป","答題進度":"ความคืบหน้า","目前題型:":"","題數:":"ทั้งหมด:","播放進度：":"","時長：":"","總題數":"ทั้งหมด","已完成":"เลือกแล้ว","待完成":"ยังไม่เสร็จ","已經是第一題":"คุณอยู่ที่คำถามแรก","已經是最後一題":"คุณอยู่ที่คำถามสุดท้าย","抱歉":"เสียใจ","繳交成功":"ส่งเรียบร้อยแล้ว","ConfirmModalTip":"คุณต้องการส่งแบบทดสอบหรือไม่? ","ConfirmModalYes":"ใช่ฉันแน่ใจ","ConfirmModalNo":"ยกเลิก","已答完所有題目":"ทุกคำถามมีคำตอบ","完成":"ทำได้ดี! ","該測驗已完成":"ส่งแบบทดสอบไปแล้ว","無效答題碼":"รหัสคำถามไม่ถูกต้อง","聲音題":"คำถามเสียง","填充題":"ไส้เปล่า"}')},8954:function(t,e,n){},9469:function(t,e,n){"use strict";n("05f0")},"99f6":function(t,e,n){t.exports=n.p+"img/illustration_eye.be66f9a9.png"},"9c0c":function(t,e,n){},"9ea5":function(t){t.exports=JSON.parse('{"brandname":"互動貼圖","答題碼":"答題碼","開始":"開始","答題碼不存在":"答題碼不存在","測驗已繳交":"測驗已繳交","答題碼為空，請輸入答題碼":"答題碼為空，請輸入答題碼","language":"語言","繳交":"繳交","單選題":"單選題","複選題":"複選題","上一題":"上一題","下一題":"下一題","答題進度":"答題進度","目前題型:":"目前題型:","題數:":"題數:","播放進度：":"進度：","時長：":"時長：","總題數":"總題數","已完成":"已完成","待完成":"待完成","已經是第一題":"已經是第一題","已經是最後一題":"已經是最後一題","抱歉":"抱歉","繳交成功":"繳交成功","ConfirmModalTip":"請確認是否繳交此次作答？","ConfirmModalYes":"繳交","ConfirmModalNo":"取消","已答完所有題目":"已答完所有題目","完成":"完成！","該測驗已完成":"測驗已完成","無效答題碼":"無效答題碼","聲音題":"聲音題","使用教學":"使用教學","跳過教學":"跳過教學","上一個":"上一個","下一個":"下一個","開始測驗":"開始測驗","點選您認為正確的答案。":"點選您認為正確的答案。","完成一題作答後，點選「下一題」繼續測驗。":"完成一題作答後，點選「下一題」繼續測驗。","您可以透過答題進度，您可以了解測驗完成狀況、快速切換題號。":"您可以透過答題進度，您可以了解測驗完成狀況、快速切換題號。","完成全部題目作答後，點選「繳交」送出測驗。":"完成全部題目作答後，點選「繳交」送出測驗。","取得回答紀錄":"取得回答紀錄","填充題":"填充題"}')},ae73:function(t,e,n){},af9c:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"rn"!==t.clienttype?n("b-dropdown",{attrs:{id:"lang-dropdown",right:"",size:"sm",variant:t.bgcolor,"no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("div",{staticClass:"center"},[n("i",{staticClass:"fas fa-globe-americas",style:"font-size: 1.75rem; color:"+t.contentcolor+";margin-right:2px;"}),t.description?n("i",{staticStyle:{"font-size":"16px"}},[t._v(" "+t._s(t.$t("language"))+" ")]):t._e(),n("i",{staticClass:"fas fa-sort-down ml-2",staticStyle:{"margin-bottom":"1px"}})])]},proxy:!0}],null,!1,3683386011)},t._l(t.langs,(function(e,i){return n("b-dropdown-item",{key:i,on:{click:function(n){n.preventDefault(),t.$i18n.locale=e.code}}},[t._v(" "+t._s(e.label)+" ")])})),1):t._e()},a=[],r=n("2b0e"),s=r["default"].extend({props:{bgcolor:{type:String,required:!1,default:"secondary"},contentcolor:{type:String,required:!1,default:""},description:{type:Boolean,required:!1,default:!0},clienttype:{type:String,required:!1,default:""}},data:function(){return{langs:[{label:"繁體中文",code:"zh-TW"},{label:"English",code:"en"},{label:"ไทย",code:"th"}]}},created:function(){""!==this.$route.query.language&&null!=this.$route.query.language&&void 0!==this.$route.query.language?this.$i18n.locale=this.$route.query.language:this.$i18n.locale="en"}}),o=s,l=(n("bc08"),n("2877")),u=Object(l["a"])(o,i,a,!1,null,"536dc4e3",null);e["a"]=u.exports},b640:function(t,e,n){t.exports=n.p+"img/logo.48bd83d6.jpg"},bc08:function(t,e,n){"use strict";n("752c")},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("99af"),n("e792"),n("0cdd");var i=n("2b0e"),a=n("5f5b");n("ab8b"),n("2dd8");i["default"].use(a["a"]);var r=n("ee98"),s=n.n(r),o=n("2b27"),l=n.n(o),u=n("130e"),c=n("bc3a"),d=n.n(c),h=n("9062"),p=n.n(h),g=(n("e40d"),n("fd32")),m=n.n(g),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("loading",{attrs:{active:t.$store.state.isLoading},on:{"update:active":function(e){return t.$set(t.$store.state,"isLoading",e)}}}),t.displayOverlay?n("div",{staticClass:"full-screen-overlay"}):t._e(),n("router-view"),n("notifications",{attrs:{position:"top center","ignore-duplicates":!0}})],1)},b=[],w=i["default"].extend({computed:{displayOverlay:function(){return this.$store.state.displayOverlay}}}),v=w,y=(n("5c0b"),n("2877")),S=Object(y["a"])(v,f,b,!1,null,null,null),k=S.exports,x=(n("b0c0"),n("8c4f")),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("Stage",{attrs:{quiz:t.quizData}})],1)},_=[],A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.quiz?n("div",{staticClass:"stage",style:t.stageSize},[n("img",{staticClass:"base-image",attrs:{src:t.quiz.baseImage.url,alt:"base image"}}),t._l(t.quiz.clickAreas,(function(e,i){return n("StageBlock",{key:i,staticClass:"click-area-style",style:{top:e.area.y*t.imageRatio+"px",left:e.area.x*t.imageRatio+"px"},attrs:{width:e.area.width*t.imageRatio,height:e.area.height*t.imageRatio,"scale-ratio":t.imageRatio,"action-type":e.action.type,label:e.label,content:e.content,"multiple-select":t.multipleSelect},on:{updateAnsSet:t.updateParentAnsSet}})}))],2):t._e()},C=[],z=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isHighlight?n("div",[n("div",{staticClass:"stage-block",class:{"answer-border":t.isAnswer},style:t.wrapperStyle,on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.highlightMe.apply(null,arguments)},dblclick:t.highlightMe}},[t.content.textField&&t.content.textField.enabled?n("StageText",{attrs:{width:t.width,height:t.height,"scale-ratio":t.scaleRatio,field:t.content.textField}}):t._e(),t.content.imageField&&t.content.imageField.enabled?n("StageImage",{attrs:{width:t.width,height:t.height,field:t.content.imageField}}):t._e(),t.displayAnswer&&t.isAnswer?n("div",{staticClass:"answer-check"},[n("i",{staticClass:"fas fa-check"})]):t._e(),n("div",{staticClass:"highlight"})],1)]):n("div",[n("div",{staticClass:"stage-block",class:{"answer-border":t.isAnswer},style:t.wrapperStyle,on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.highlightMe.apply(null,arguments)},dblclick:t.highlightMe}},[t.content.textField&&t.content.textField.enabled?n("StageText",{attrs:{width:t.width,height:t.height,"scale-ratio":t.scaleRatio,field:t.content.textField}}):t._e(),t.content.imageField&&t.content.imageField.enabled?n("StageImage",{attrs:{width:t.width,height:t.height,field:t.content.imageField}}):t._e(),t.displayAnswer&&t.isAnswer?n("div",{staticClass:"answer-check"},[n("i",{staticClass:"fas fa-check"})]):t._e()],1)])])}),N=[],I=(n("a434"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stagetext"},[n("TextArea",{style:{"font-size":t.field.size*t.textScaleRatio+"px"},attrs:{"display-placeholder":t.displayPlaceholder,field:t.field},model:{value:t.field.text,callback:function(e){t.$set(t.field,"text",e)},expression:"field.text"}})],1)}),E=[],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"textarea",class:{"input-border":t.isFocus},style:{width:t.field.paddingX+"%","max-height":t.field.paddingY+"%"}},[t.displayPlaceholder&&""===t.value&&!t.isFocus?n("div",{staticClass:"input-zone placeholder noselect",on:{click:function(e){return t.$refs.editable.focus()}}},[t._v(" text ")]):t._e(),n("div",{ref:"editable",staticClass:"input-zone input",attrs:{contenteditable:"false"},on:{focus:t.onFocus,blur:t.onBlur,input:t.onInput}})])},L=[],$=i["default"].extend({name:"TextArea",props:{value:{type:String,default:""},displayPlaceholder:{type:Boolean,default:!0},field:{type:Object,required:!1,default:null}},data:function(){return{isFocus:!1}},watch:{value:function(t){var e=this.$refs.editable;if(e&&t!==e.innerText){e.innerText=t;var n=document.createRange(),i=window.getSelection();if(!i)throw new Error("Get selection failed");var a=e.childNodes[e.childNodes.length-1];if(!a)return;n.setStart(a,a.length),n.collapse(!0),i.removeAllRanges(),i.addRange(n)}}},mounted:function(){var t=this.$refs.editable;t&&(t.innerText=this.value)},methods:{onInput:function(t){this.$emit("input",t.target.innerText)},onFocus:function(){this.isFocus=!0},onBlur:function(){this.isFocus=!1},reset:function(){this.$emit("input","")}}}),F=$,q=(n("e504"),Object(y["a"])(F,O,L,!1,null,"43e3f742",null)),R=q.exports,B=new i["default"],P=(new i["default"],new i["default"],i["default"].extend({name:"StageText",components:{TextArea:R},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},scaleRatio:{type:Number,required:!0},field:{type:Object,required:!1,default:null}},data:function(){return{displayPlaceholder:!0}},computed:{textScaleRatio:function(){var t=.28846153846153844;return this.scaleRatio/t}},mounted:function(){B.$on("reset-stage",this.reset),B.$on("before-screenshot",this.beforeScreenshot),B.$on("after-screenshot",this.afterScreenshot)},methods:{reset:function(){},beforeScreenshot:function(){this.displayPlaceholder=!1},afterScreenshot:function(){this.displayPlaceholder=!0}}})),M=P,D=(n("fddd"),Object(y["a"])(M,I,E,!1,null,"8368b84c",null)),j=D.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stage-image",style:{width:t.width+"px",height:t.height+"px"}},[""!==t.errorMessage?n("div",{staticClass:"error"},[n("i",{staticClass:"fas fa-exclamation-triangle"}),n("br"),t._v(" "+t._s(t.errorMessage)+" ")]):t.isLoading?n("div",[n("loading",{attrs:{active:t.isLoading,"is-full-page":!1,"background-color":"transparent"},on:{"update:active":function(e){t.isLoading=e}}})],1):t.field.url?n("div",{staticClass:"pic",style:{width:t.field.paddingX+"%",height:t.field.paddingY+"%","border-radius":t.field.radius+"px"}},[n("img",{style:{width:t.field.size+"%"},attrs:{src:t.field.url}})]):t._e()])},Q=[],Y=n("2909"),V=n("1da1"),H=n("d4ec"),X=n("bee2"),G=(n("96cf"),n("e9c4"),n("25f0"),function(){function t(){Object(H["a"])(this,t)}return Object(X["a"])(t,null,[{key:"deepcopy",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"randomString",value:function(t){return t<0?"":Math.random().toString(36).substring(t)}},{key:"preloadImage",value:function(t){return new Promise((function(e,n){var i=new Image;i.onload=function(){e()},i.onerror=function(){n(new Error("Failed to load image from ".concat(t)))},i.src=t}))}},{key:"demo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return new Promise((function(e,n){var i=Math.random();i>t?e(i):n(new Error("less than ".concat(t)))}))}},{key:"wait",value:function(t){return new Promise((function(e){setTimeout((function(){e()}),t)}))}},{key:"retry",value:function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(n,i){var a,r,s,o,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=l.length>2&&void 0!==l[2]?l[2]:5,r=l.length>3&&void 0!==l[3]?l[3]:100,a=Math.max(a,0),r=Math.max(r,10),s=null,o=0;case 6:if(!(o<a)){e.next=21;break}return e.prev=7,e.next=10,n.apply(void 0,Object(Y["a"])(i));case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e["catch"](7),s=e.t0;case 16:return e.next=18,t.wait(r);case 18:o+=1,e.next=6;break;case 21:throw s;case 22:case"end":return e.stop()}}),e,null,[[7,13]])})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"fileToDataUrl",value:function(t){return new Promise((function(e,n){var i=new FileReader;i.onload=function(t){if(t&&t.target&&"string"===typeof t.target.result){var i=t.target.result;e(i)}else n(new Error("Failed to read file as dataUrl"))},i.readAsDataURL(t)}))}}]),t}()),J=i["default"].extend({name:"StageImage",props:{width:{type:Number,default:200},height:{type:Number,default:200},field:{type:Object,required:!1,default:null}},data:function(){return{errorMessage:"",isLoading:!1}},computed:{imageUrl:function(){return this.field.url}},watch:{imageUrl:function(t){var e=this;""!==t&&(this.isLoading=!0,this.$store.commit("addStagePendingTask"),G.preloadImage(t).catch((function(){e.showErrorMessage("無法讀取檔案")})).finally((function(){e.$store.commit("finishStagePendingTask"),e.isLoading=!1})))}},mounted:function(){B.$on("reset-stage",this.reset)},methods:{showErrorMessage:function(t){var e=this;this.errorMessage=t,setTimeout((function(){e.errorMessage=""}),2e3)},reset:function(){this.errorMessage="",this.isLoading=!1}}}),W=J,K=(n("80a9"),Object(y["a"])(W,U,Q,!1,null,"1c985d71",null)),Z=K.exports,tt=i["default"].extend({name:"StageBlock",components:{StageText:j,StageImage:Z},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},scaleRatio:{type:Number,required:!0},actionType:{type:String,required:!0},label:{type:String,required:!1,default:""},content:{type:Object,required:!1,default:function(){return{}}},multipleSelect:{type:Boolean,required:!1,default:!1}},data:function(){return{displayAnswer:!0}},computed:{wrapperStyle:function(){return{width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}},quizAnswer:function(){return this.$store.state.stageAnswer},isAnswer:function(){return String(this.quizAnswer)===this.label},isHighlight:function(){if("answer"===this.actionType){if(!1===this.multipleSelect){var t=this.$store.state.stageHighlightLabel;return void 0!==t[0]&&null!==t[0]&&null!==t&&this.$store.state.stageHighlightLabel[0]===this.label}if(this.multipleSelect){for(var e=this.$store.state.stageHighlightLabel,n=0;n<e.length;n+=1)if(e[n]===this.label)return!0;return!1}}return!1}},mounted:function(){B.$on("reset-stage",this.reset)},methods:{reset:function(){this.displayAnswer=!1},toggleAnswer:function(){this.$store.commit("updateStageHighlightLabel",this.label)},highlightMe:function(){if("answer"===this.actionType){if(!1===this.multipleSelect){var t=this.$store.state.stageHighlightLabel;t[0]===this.label?t.pop():this.$store.commit("updateStageHighlightLabel",[this.label])}else if(this.multipleSelect){for(var e=this.$store.state.stageHighlightLabel,n=!1,i=0;i<e.length;i+=1)e[i]===this.label&&(e.splice(i,1),n=!0);n||e.push(this.label),this.$store.commit("updateStageHighlightLabel",e)}this.$emit("updateAnsSet","")}this.$parent.itemClicked()}}}),et=tt,nt=(n("7edb"),Object(y["a"])(et,z,N,!1,null,"5ba58848",null)),it=nt.exports,at=i["default"].extend({name:"Stage",components:{StageBlock:it},props:{imageDisplayWidth:{type:Number,required:!1,default:300},quiz:{type:Object,required:!1,default:null},multipleSelect:{type:Boolean,required:!1,default:!1},userAnswer:{type:Array,required:!1,default:[""]}},data:function(){return{}},computed:{imageRatio:function(){return this.quiz?this.imageDisplayWidth/this.quiz.baseImage.width:0},stageSize:function(){var t=this.imageDisplayWidth,e=t;return this.quiz&&this.quiz.baseImage&&(e=this.quiz.baseImage.height*this.imageRatio),{"max-width":"".concat(t,"px"),"max-height":"".concat(e,"px"),"min-width":"".concat(t,"px")}}},created:function(){this.$store.commit("updateStageHighlightLabel",this.userAnswer)},updated:function(){this.$store.commit("updateStageHighlightLabel",this.userAnswer)},methods:{updateParentAnsSet:function(t){this.$emit("updateAnsSetFromSub",this.$store.state.stageHighlightLabel)},itemClicked:function(){this.$parent.checkIsAllSelected()}}}),rt=at,st=(n("f121"),Object(y["a"])(rt,A,C,!1,null,"4361b354",null)),ot=st.exports,lt=i["default"].extend({name:"Home",components:{Stage:ot},data:function(){return{quizData:{answer:"B",templateName:"title four image",clickAreas:[{area:{x:0,width:1040,y:0,height:520},contents:[{options:[{inputType:"number",label:"大小",value:"22"}],label:"文字",check:!0,type:"text",value:"什麼顏色？"},{options:[{inputType:"number",label:"尺寸",value:"125"}],label:"圖片",check:!0,type:"image",value:"https://storage.googleapis.com/quiz-storage/images/QMY1SCYYxJbnoK5"}],action:{type:""},label:"Title"},{area:{x:0,width:520,y:520,height:520},contents:[{options:[{inputType:"number",label:"大小",value:24}],label:"文字",check:!1,type:"text",value:""},{options:[{inputType:"number",label:"尺寸",value:"108"}],label:"圖片",check:!0,type:"image",value:"https://storage.googleapis.com/quiz-storage/images/kikxTIP59rAa42k"}],action:{type:"answer"},label:"A"},{area:{x:520,width:520,y:520,height:520},contents:[{options:[{inputType:"number",label:"大小",value:24}],label:"文字",check:!1,type:"text",value:""},{options:[{inputType:"number",label:"尺寸",value:"168"}],label:"圖片",check:!0,type:"image",value:"https://storage.googleapis.com/quiz-storage/images/baRAjqhUBU19cp4"}],action:{type:"answer"},label:"B"},{area:{x:0,width:520,y:1040,height:520},contents:[{options:[{inputType:"number",label:"大小",value:24}],label:"文字",check:!1,type:"text",value:""},{options:[{inputType:"number",label:"尺寸",value:"178"}],label:"圖片",check:!0,type:"image",value:"https://storage.googleapis.com/quiz-storage/images/fsUxDMq7NPBm32T"}],action:{type:"answer"},label:"C"},{area:{x:520,width:520,y:1040,height:520},contents:[{options:[{inputType:"number",label:"大小",value:24}],label:"文字",check:!1,type:"text",value:""},{options:[{inputType:"number",label:"尺寸",value:"178"}],label:"圖片",check:!0,type:"image",value:"https://storage.googleapis.com/quiz-storage/images/IgB23kRMQHjs2Vz"}],action:{type:"answer"},label:"D"}],baseImage:{width:1040,url:"https://i.imgur.com/N3Yb1E6.png",height:1560},outputImage:{width:1040,url:"https://storage.googleapis.com/quiz-storage/images/XnofHElxdVOH5Pe",height:1560},templateId:"1234a7b6-78f0-465b-a6bb-fa02df2c24b8",enableAudio:!0,audioUrl:"https://storage.googleapis.com/quiz-storage/audios/pGh2qtxGn6YuRqt.m4a",audioDuration:27252,uuid:"a9a966e3-cd2d-43cf-bb1f-992de3a47e64",previewImage:{width:1040,url:"https://storage.googleapis.com/quiz-storage/images/XnofHElxdVOH5Pe",height:1560}}}}}),ut=lt,ct=Object(y["a"])(ut,T,_,!1,null,null,null),dt=ct.exports,ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{on:{dblclick:t.doubleClick}},[i("b-navbar",{staticClass:"navbar navbar-expand-lg navbar-light fixed-top  box-shadow:0px 4.9px 5px -3px grey;"},[i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"navbar-brand",attrs:{href:"#"}},[i("img",{staticClass:"d-inline-block align-text-top",staticStyle:{"border-radius":"50%",border:"1px solid white"},attrs:{src:n("b640"),alt:"",width:"30",height:"30"}}),i("span",{staticStyle:{color:"white"}},[t._v(" "+t._s(t.$t("brandname")))])]),i("div",{staticStyle:{float:"right"}},["DISABLE"==t.onboardingStatus?i("b-link",{staticStyle:{"margin-right":"15px",color:"white","text-decoration":"underline"},on:{click:t.guideBtn}},[t._v(" "+t._s(t.$t("使用教學"))+" ")]):t._e(),i("LanguageSelector",{staticStyle:{"margin-right":"5px"},attrs:{bgcolor:"outline-light",description:!1,clienttype:t.clientType}}),t.isAllSelected?i("b-button",{attrs:{variant:"warning"},on:{click:function(e){return t.$bvModal.show("modal-scoped")}}},[t._v(" "+t._s(t.$t("繳交"))+" ")]):i("b-button",{attrs:{id:"onboarding-4",variant:"outline-light",disabled:"INITIAL"==t.onboardingStatus||"MANUAL"==t.onboardingStatus},on:{click:function(e){return t.$bvModal.show("modal-scoped")}}},[t._v(" "+t._s(t.$t("繳交"))+" ")])],1)])]),i("div",{staticStyle:{"margin-top":"165px","margin-left":"3%","margin-right":"3%"}},[i("div",{staticStyle:{display:"inline-block"}},[i("h1",{staticStyle:{display:"inline-block"}},[t._v(" "+t._s(t.currentNum+1)+" ")]),i("h4",{staticStyle:{display:"inline-block"}},[t._v(" /"+t._s(t.amount)+" ")])]),i("div",{staticStyle:{display:"inline-block","margin-left":"3"}},[t._v("   "+t._s(t.$t("目前題型:"))+" "),!1!==t.ansSet[t.currentNum].multipleSelect||t.ansSet[t.currentNum].isBlankFill?t._e():i("nobr",[t._v(" "+t._s(t.$t("單選題"))+" ")]),t.ansSet[t.currentNum].multipleSelect&&!t.ansSet[t.currentNum].isBlankFill?i("nobr",[t._v(" "+t._s(t.$t("複選題"))+" ")]):t._e(),t.ansSet[t.currentNum].isBlankFill?i("nobr",[t._v(" "+t._s(t.$t("填充題"))+" ")]):t._e(),!0===t.ansSet[t.currentNum].sourceQuiz.enableAudio?i("div",[t._v("   "+t._s(t.$t("聲音題"))+" ")]):t._e(),i("hr")],1),i("br"),!0===t.quizData[t.currentNum].sourceQuiz.enableAudio&&""!==t.quizData[t.currentNum].sourceQuiz.audioUrl?i("audio",{attrs:{controls:"",controlsList:"nodownload",src:t.quizData[t.currentNum].sourceQuiz.audioUrl,type:"audio/mp4"}}):t._e(),i("center",{staticStyle:{"margin-bottom":"120px"}},[i("div",{staticStyle:{"z-index":"1055"},attrs:{id:"onboarding-1"}},[i("Stage",{attrs:{quiz:t.quizData[t.currentNum].sourceQuiz,"multiple-select":t.ansSet[t.currentNum].multipleSelect,"user-answer":t.ansSet[t.currentNum].userAnswer},on:{updateAnsSetFromSub:t.updateSubOfAnsSet}})],1),t.ansSet[t.currentNum].isBlankFill?i("b-col",{staticClass:"pb-2",staticStyle:{"margin-top":"30px"},attrs:{lg:"4"}},[i("b-form-textarea",{staticStyle:{"margin-top":"10px",width:"300px",border:"1.3px solid #2E3A59"},attrs:{id:"textarea",placeholder:"...",rows:"3","max-rows":"6"},model:{value:t.blankFillAnswer,callback:function(e){t.blankFillAnswer=e},expression:"blankFillAnswer"}})],1):t._e()],1)],1),i("text",[t._v(t._s(t.ansSet[t.currentNum].timeSpent))]),i("div",{staticClass:"fixed-bottom"},[i("div",{staticClass:"navbar-light",attrs:{role:"group"}},[i("div",{staticClass:"btn-group bottom-btns",staticStyle:{height:"70%"}},[i("b-button",{staticClass:"btn btn-outline-light",attrs:{variant:"outline-light",disabled:"INITIAL"==t.onboardingStatus||"MANUAL"==t.onboardingStatus},on:{click:t.previousBtn}},[t._v("    "),i("svg",{staticClass:"bi bi-arrow-left-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"}})]),t._v(" "+t._s(t.$t("上一題"))+" ")]),i("b-button",{attrs:{id:"liveToastBtn",variant:"outline-light",disabled:"INITIAL"==t.onboardingStatus||"MANUAL"==t.onboardingStatus},on:{click:t.listBtn}},[t._v("   "),i("svg",{staticClass:"bi bi-list-nested",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M4.5 11.5A.5.5 0 0 1 5 11h10a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zm-2-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm-2-4A.5.5 0 0 1 1 3h10a.5.5 0 0 1 0 1H1a.5.5 0 0 1-.5-.5z"}})]),t._v(" "+t._s(t.$t("答題進度"))+" ")]),i("b-button",{staticClass:"btn btn-light",attrs:{id:"onboarding-2",disabled:"INITIAL"==t.onboardingStatus||"MANUAL"==t.onboardingStatus},on:{click:t.nextBtn}},[t._v("    "),i("svg",{staticClass:"bi bi-arrow-right-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"}})]),t._v(" "+t._s(t.$t("下一題"))+" ")])],1)]),i("div",{staticClass:"copyright"},[i("div",{staticClass:"content"},[i("div",{staticClass:"txt"},[t._v(" Copyright"+t._s(t.year)+" © 學力科技 ")]),i("div",{staticClass:"txt code"},[t._v(" "+t._s(t.code)+" ")])])])]),i("b-modal",{attrs:{title:t.$i18n.t("答題進度"),"hide-footer":""},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[i("p",[i("question-list",{attrs:{parentdata:t.ansSet},on:{numChanged:t.updateCurrentNum}})],1)]),i("ConfirmModal",{on:{callSubmit:function(e){return t.submitBtn()}}}),i("b-modal",{attrs:{"hide-header":"",centered:""},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[i("b-button",{staticStyle:{width:"80px"},attrs:{size:"sm",variant:"secondary"},on:{click:t.goToCalibration}},[t._v(" 去校正 ")]),i("b-button",{attrs:{size:"sm",variant:"outline-secondary"},on:{click:t.hideEyeTrackingModal}},[t._v(" 馬上開始測驗 ")])]},proxy:!0}]),model:{value:t.eyeTrackingModalShow,callback:function(e){t.eyeTrackingModalShow=e},expression:"eyeTrackingModalShow"}},[t._v(" 前往眼球追踪校正？ ")]),t._l(t.onboardingDataList,(function(e,n){return i("div",{key:n},["INITIAL"!=t.onboardingStatus&&"MANUAL"!=t.onboardingStatus||t.onboardingIndex!==n&&t.onboardingPrevIndex!==n?t._e():i("b-popover",{ref:"popoveronboarding1",refInFor:!0,attrs:{target:e.target,show:"",placement:"auto",container:"my-container"},scopedSlots:t._u([{key:"title",fn:function(){return[i("b-button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:t.closeOnboardingBtn}},[i("span",{staticClass:"d-inline-block",attrs:{"aria-hidden":"true"}},[t._v("×")])]),i("nobr",[t._v(t._s(e.title))])]},proxy:!0}],null,!0)},[i("div",[i("p",{staticClass:"text-dark"},[t._v(" "+t._s(e.content)),i("br")]),e.hasSkipBtn?i("nobr",[i("b-button",{attrs:{size:"sm",pill:"",variant:"outline-dark"},on:{click:t.closeOnboardingBtn}},[i("nobr",{staticClass:"px-2"},[t._v(" "+t._s(t.$i18n.t("跳過教學"))+" ")])],1),t._v("   ")],1):t._e(),e.hasPrevBtn?i("nobr",[i("b-button",{attrs:{size:"sm",pill:"",variant:"outline-dark"},on:{click:t.onboardingPreviousBtn}},[i("nobr",{staticClass:"px-1"},[t._v(" "+t._s(t.$i18n.t("上一個"))+" ")])],1),t._v("   ")],1):t._e(),e.hasNextBtn?i("nobr",[i("b-button",{attrs:{size:"sm",pill:"",variant:"primary"},on:{click:t.onboardingNextBtn}},[i("nobr",{staticClass:"px-3"},[t._v(" "+t._s(t.$i18n.t("下一個"))+" ")])],1)],1):t._e(),e.hasCloseBtn?i("nobr",[i("b-button",{attrs:{size:"sm",pill:"",variant:"success"},on:{click:t.closeOnboardingBtn}},[i("nobr",{staticClass:"px-3"},[t._v(" "+t._s(t.$i18n.t("開始測驗"))+" ")])],1)],1):t._e()],1)])],1)}))],2)},pt=[],gt=(n("d81d"),n("51c2")),mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("ul",{staticClass:"text-center"}),n("b-progress",{attrs:{max:t.pMax}},[n("b-progress-bar",{attrs:{value:t.pValue,label:(t.pValue/t.pMax*100).toFixed(0)+"%",animated:""}})],1),n("br"),n("b-alert",{staticClass:"text-center",attrs:{show:"",variant:"info"}},[n("svg",{staticClass:"bi bi-calendar3",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z"}}),n("path",{attrs:{d:"M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}})]),t._v("  "+t._s(t.$t("總題數"))+": "+t._s(t.amount)+"    "),n("br"),t._v(t._s(t.$t("已完成"))+": "+t._s(t.amount-t.unfinished)+"   "+t._s(t.$t("待完成"))+": "+t._s(t.unfinished)+" ")]),n("b-row",t._l(t.ansSet,(function(e,i){return n("div",{key:e,staticStyle:{float:"left","line-height":"34px",width:"25%","text-align":"right"}},[t.buttonStateCheck(i)?n("b-col",{staticClass:"p-3 text-center "},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.changeNum(i)}}},[t._v(" "+t._s(i+1)+" ")])],1):n("b-col",{staticClass:"p-3 text-center "},[n("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return t.changeNum(i)}}},[t._v(" "+t._s(i+1)+" ")])],1)],1)})),0)],1)},ft=[],bt={name:"QuestionList",props:["parentdata"],data:function(){return{pValue:0,pMax:100,amount:0,unfinished:0,ansSet:[]}},computed:{},created:function(){var t=0;this.pValue=0,this.unfinished=0,this.ansSet=[],this.ansSet=this.parentdata;for(var e=0;e<this.ansSet.length;e+=1)this.checkSignleQuestion(this.ansSet[e].userAnswer)||(this.ansSet[e].isBlankFill?""===this.ansSet[e].blankFillAnswer&&(t+=1):t+=1);this.amount=this.ansSet.length,this.pValue=(this.amount-t)/this.amount*100,this.unfinished=t},methods:{changeNum:function(t){this.$emit("numChanged",t)},checkSignleQuestion:function(t){for(var e=!1,n=0;n<t.length;n+=1)if(""!==t[n]&&void 0!==t[n]&&null!==t[n])return!0;return e},buttonStateCheck:function(t){return this.ansSet[t].isBlankFill?""!==this.ansSet[t].blankFillAnswer:this.checkSignleQuestion(this.ansSet[t].userAnswer)}}},wt=bt,vt=Object(y["a"])(wt,mt,ft,!1,null,null,null),yt=vt.exports,St=function t(e,n,i,a,r,s,o){Object(H["a"])(this,t),this.userAnswer=[],this.sourceQuiz={},this.uuid="",this.timeSpent=0,this.multipleSelect=!1,this.isBlankFill=!1,this.blankFillAnswer="",this.userAnswer=null===e||void 0===e?[]:e,this.sourceQuiz=n,this.uuid=i,this.timeSpent=a,this.multipleSelect=r,this.isBlankFill=s,this.blankFillAnswer=o},kt=n("af9c"),xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{attrs:{id:"modal-scoped",centered:""},scopedSlots:t._u([{key:"default",fn:function(){return[n("p",[t._v(t._s(t.$t("ConfirmModalTip")))])]},proxy:!0},{key:"modal-footer",fn:function(e){var i=e.hide;return[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.callSubmit()}}},[t._v(" "+t._s(t.$t("ConfirmModalYes"))+" ")]),n("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(t){return i("forget")}}},[t._v(" "+t._s(t.$t("ConfirmModalNo"))+" ")])]}}])})],1)},Tt=[];i["default"].use(gt["a"]);var _t,At=i["default"].extend({methods:{callSubmit:function(){this.$emit("callSubmit")}}}),Ct=At,zt=Object(y["a"])(Ct,xt,Tt,!1,null,null,null),Nt=zt.exports,It=n("fd0e"),Et=n("6ad1"),Ot=function t(e){Object(H["a"])(this,t),this.hasOnboarding=!0,"False"===e.hasOnBoarding?this.hasOnboarding=!1:this.hasOnboarding=!0},Lt=function(){function t(){Object(H["a"])(this,t)}return Object(X["a"])(t,null,[{key:"onboarding",value:function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Et["a"].post("user/onboarding",e);case 2:return n=t.sent,t.abrupt("return",new Ot(n.data));case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),$t=d.a.create({baseURL:"https://7e8c-4-15-76-68.ngrok.io",headers:{Accept:"application/json","Content-Type":"application/json"}}),Ft=function(){function t(){Object(H["a"])(this,t)}return Object(X["a"])(t,null,[{key:"log",value:function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$t.get("/log/".concat(e));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),qt=d.a.create({baseURL:"https://eye-tracking-api.qsticker.net/v1",headers:{Accept:"application/json","Content-Type":"application/json"}}),Rt=function(){function t(){Object(H["a"])(this,t)}return Object(X["a"])(t,null,[{key:"sendEyeTrackingData",value:function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(e,n,i,a,r,s){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qt.post("/tracking/data",{userUuid:e,shortId:n,quesUuid:i,tracking:a,isDone:r,sourceUuid:s}).catch((function(t){console.log(t)}));case 2:case"end":return t.stop()}}),t)})));function e(e,n,i,a,r,s){return t.apply(this,arguments)}return e}()},{key:"sendQuizData",value:function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(e,n,i,a,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qt.post("/quiz/group",{uuid:e,shortId:n,answerList:i,sourceQuizGroupName:a,sourceQuizGroupId:r}).catch((function(t){console.log(t)}));case 2:case"end":return t.stop()}}),t)})));function e(e,n,i,a,r){return t.apply(this,arguments)}return e}()}]),t}(),Bt={answerList:[{userAnswer:[],timeSpent:39,multipleSelect:!1,startTime:1659116526256,endTime:0,uuid:"f52f9e6d-96d5-4f84-a6f0-3e65c0e2a0ed",sourceQuiz:{score:1,templateName:"title four image",clickAreas:[{area:{x:0,width:1040,y:0,height:520},action:{type:""},label:"Title",content:{imageField:{paddingX:80,size:80,radius:16,enabled:!1,url:"",paddingY:80},textField:{paddingX:80,size:24,text:"1 + 1 = ?\n",enabled:!0,paddingY:80}}},{area:{x:0,width:520,y:520,height:520},action:{type:"answer"},label:"A",content:{imageField:{paddingX:80,size:80,radius:16,enabled:!1,url:"",paddingY:80},textField:{paddingX:80,size:24,text:"7",enabled:!0,paddingY:80}}},{area:{x:520,width:520,y:520,height:520},action:{type:"answer"},label:"B",content:{imageField:{paddingX:80,size:80,radius:16,enabled:!1,url:"",paddingY:80},textField:{paddingX:80,size:24,text:"9\n",enabled:!0,paddingY:80}}},{area:{x:0,width:520,y:1040,height:520},action:{type:"answer"},label:"C",content:{imageField:{paddingX:80,size:80,radius:16,enabled:!1,url:"",paddingY:80},textField:{paddingX:80,size:24,text:"2",enabled:!0,paddingY:80}}},{area:{x:520,width:520,y:1040,height:520},action:{type:"answer"},label:"D",content:{imageField:{paddingX:80,size:80,radius:16,enabled:!1,url:"",paddingY:80},textField:{paddingX:80,size:24,text:"10",enabled:!0,paddingY:80}}}],multipleSelect:!1,baseImage:{width:1040,url:"https://storage.googleapis.com/quiz-storage/quiz-templates/standard_grid.jpg",height:1560},templateId:"1234a7b6-78f0-465b-a6bb-fa02df2c24b8",enableAudio:!1,audioDuration:0,uuid:"4621460a-4dad-493a-84f4-fe153f877aee"}},{userAnswer:[],timeSpent:0,multipleSelect:!1,startTime:0,endTime:0,uuid:"e84878e0-0c47-4c83-9658-a3346c149b58",sourceQuiz:{score:1,templateName:"title four image",clickAreas:[{area:{x:0,width:1040,y:0,height:520},action:{type:""},label:"Title",content:{imageField:{paddingX:80,size:80,radius:16,enabled:!1,url:"",paddingY:80},textField:{paddingX:80,size:24,text:"10 - 1 = ?\n",enabled:!0,paddingY:80}}},{area:{x:0,width:520,y:520,height:520},action:{type:"answer"},label:"A",content:{imageField:{paddingX:80,size:80,radius:16,enabled:!1,url:"",paddingY:80},textField:{paddingX:80,size:24,text:"1",enabled:!0,paddingY:80}}},{area:{x:520,width:520,y:520,height:520},action:{type:"answer"},label:"B",content:{imageField:{paddingX:80,size:80,radius:16,enabled:!1,url:"",paddingY:80},textField:{paddingX:80,size:24,text:"9",enabled:!0,paddingY:80}}},{area:{x:0,width:520,y:1040,height:520},action:{type:"answer"},label:"C",content:{imageField:{paddingX:80,size:80,radius:16,enabled:!1,url:"",paddingY:80},textField:{paddingX:80,size:24,text:"6",enabled:!0,paddingY:80}}},{area:{x:520,width:520,y:1040,height:520},action:{type:"answer"},label:"D",content:{imageField:{paddingX:80,size:80,radius:16,enabled:!1,url:"",paddingY:80},textField:{paddingX:80,size:24,text:"3",enabled:!0,paddingY:80}}}],multipleSelect:!1,baseImage:{width:1040,url:"https://storage.googleapis.com/quiz-storage/quiz-templates/standard_grid.jpg",height:1560},templateId:"1234a7b6-78f0-465b-a6bb-fa02df2c24b8",enableAudio:!1,audioDuration:0,uuid:"fdd84aa5-98eb-447b-895a-769d1f30be06"}}],sourceQuizGroupName:"Example",shortId:"vthh0",amount:2,sourceQuizGroupId:"6bf72ef4-f0e7-4d14-aa36-0cad3deb161a",ownerId:"3b0ae5d4-58d5-4a9b-beff-dbea09163e78",uuid:"23530f96-54e2-46c7-befe-61f72a448f21",status:"TEMP_SUBMITTED"},Pt={example:Bt},Mt=n("0186");(function(t){t["SUBMMITED"]="SUBMMITED",t["TEMP_SUBMITTED"]="TEMP_SUBMITTED",t["STARTED"]="STARTED",t["EMPTY_INPUT"]="EMPTY_INPUT",t["NOT_EXISTING"]="NOT_EXISTING",t["INITIAL"]="INITIAL",t["NETWORK_ERROR"]="NETWORK_ERROR",t["VALID"]="VALID"})(_t||(_t={}));n("159b"),n("ac1f"),n("466d");var Dt=n("a925");function jt(){var t=n("49f8"),e={};return t.keys().forEach((function(n){var i=n.match(/([A-Za-z0-9-_]+)\./i);if(i&&i.length>1){var a=i[1];e[a]=t(n)}})),e}i["default"].use(Dt["a"]);var Ut,Qt=new Dt["a"]({locale:Object({NODE_ENV:"production",VUE_APP_BASE_API_URL:"https://api.qsticker.net/service/v1/",VUE_APP_BASE_EYE_TRACKING_API_URL:"https://eye-tracking-api.qsticker.net/v1",VUE_APP_BASE_LOGGING_URL:"https://7e8c-4-15-76-68.ngrok.io",VUE_APP_BASE_ROUTE:"/",BASE_URL:"/"}).VUE_APP_I18N_LOCALE||"en",fallbackLocale:Object({NODE_ENV:"production",VUE_APP_BASE_API_URL:"https://api.qsticker.net/service/v1/",VUE_APP_BASE_EYE_TRACKING_API_URL:"https://eye-tracking-api.qsticker.net/v1",VUE_APP_BASE_LOGGING_URL:"https://7e8c-4-15-76-68.ngrok.io",VUE_APP_BASE_ROUTE:"/",BASE_URL:"/"}).VUE_APP_I18N_FALLBACK_LOCALE||"en",messages:jt()});(function(t){t["DISABLE"]="DISABLE",t["INITIAL"]="INITIAL",t["MANUAL"]="MANUAL"})(Ut||(Ut={}));var Yt=function(){function t(){Object(H["a"])(this,t)}return Object(X["a"])(t,null,[{key:"sendAnswerReport",value:function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return m.a.isInClient()&&(Ft.log("sent liff result message"),m.a.sendMessages([{type:"text",text:"complete.".concat(e)}]),Ft.log("sent message: complete.".concat(e))),Ft.log("sent browser result message"),n=It["a"].browserSubmit(e,"{}"),t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}();i["default"].use(gt["a"]);var Vt=i["default"].extend({components:{Stage:ot,QuestionList:yt,LanguageSelector:kt["a"],ConfirmModal:Nt},data:function(){return{originalQuizInstance:null,currentNum:0,amount:0,audioUrl:"",quizData:[],errored:!1,loading:!0,modalShow:!1,counter:0,toastContent:"",ansSet:[],blankFillAnswer:"",timer:null,tempSubmitTimer:null,isAllSelected:!1,allowLastTip:!0,allowFirstTip:!0,allowAllSelectedTip:!0,Status:Mt["a"],QuizStatus:_t,clientType:"",allowEyeTracking:!1,audioControl:!1,onboardingStatus:Ut.DISABLE,onboardingIndex:0,onboardingPrevIndex:0,onboardingDataList:[{title:"".concat(Qt.t("使用教學")," 1 / 4"),content:"".concat(Qt.t("點選您認為正確的答案。")),target:"onboarding-1",hasNextBtn:!0,hasPrevBtn:!1,hasSkipBtn:!0,hasCloseBtn:!1},{title:"".concat(Qt.t("使用教學")," 2 / 4"),content:"".concat(Qt.t("完成一題作答後，點選「下一題」繼續測驗。")),target:"onboarding-2",hasNextBtn:!0,hasPrevBtn:!0,hasSkipBtn:!1,hasCloseBtn:!1},{title:"".concat(Qt.t("使用教學")," 3 / 4"),content:"".concat(Qt.t("您可以透過答題進度，您可以了解測驗完成狀況、快速切換題號。")),target:"liveToastBtn",hasNextBtn:!0,hasPrevBtn:!0,hasSkipBtn:!1,hasCloseBtn:!1},{title:"".concat(Qt.t("使用教學")," 4 / 4"),content:"".concat(Qt.t("完成全部題目作答後，點選「繳交」送出測驗。")),target:"onboarding-4",hasNextBtn:!1,hasPrevBtn:!0,hasSkipBtn:!1,hasCloseBtn:!0}],code:"",userUuid:"",year:(new Date).getFullYear(),isBlankFill:!0,updateSingleQuesBlankFillTimer:null,xprediction:0,yprediction:0,eyeTrackingTimer:null,eyeTrackingResList:[],singleQuesEyeTrackingTimer:null,eyeTrackingModalShow:!1}},watch:{modalShow:{handler:function(t,e){t?(this.isCountTime(!1),this.tempSubmit()):e&&!t&&this.isCountTime(!0)}},currentNum:{handler:function(t,e){this.isCountTime(!0),this.allowEyeTracking&&this.clearSingleQuesEyeTrackingRecord(e)}},isBlankFill:{handler:function(t,e){var n=this;!e&&t?this.updateSingleQuesBlankFillTimer=window.setInterval((function(){n.ansSet[n.currentNum].blankFillAnswer=n.blankFillAnswer,n.checkIsAllSelected()}),1e3):t||window.clearInterval(this.updateSingleQuesBlankFillTimer)}},blankFillAnswer:{handler:function(t,e){this.ansSet[this.currentNum].isBlankFill&&this.checkIsAllSelected()}}},beforeCreate:function(){this.$i18n.locale=this.$route.query.language},created:function(){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var n,i,a,r,s,o,l,u,c,d,h,p,g,m,f,b,w,v,y,S,k,x,T,_,A,C,z,N;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("updateQuizCode",t.$route.query.code),t.code=t.$route.query.code,"TRUE"===t.$route.query.allowEyeTracking&&(t.allowEyeTracking=!0,t.eyeTrackingModalShow=!0),t.clientType=t.$route.query.clientType,n=_t.INITIAL,t.$store.commit("updateLoading",!0),e.prev=6,e.next=9,It["a"].check(t.$route.query.code);case 9:if(i=e.sent,i!==Mt["a"].TEMP_SUBMITTED&&i!==Mt["a"].STARTED&&i!==Mt["a"].TRY_AGAIN){e.next=47;break}return n=_t.VALID,a={answerGroupShortId:t.$route.query.code},e.next=15,Lt.onboarding(a);case 15:if(r=e.sent,console.log("onboardingInstance ".concat(JSON.stringify(r))),!0!==r.hasOnboarding){e.next=35;break}return e.next=20,It["a"].create(t.$route.query.code);case 20:for(s=e.sent,t.originalQuizInstance=s,t.quizData=s.answerList,t.amount=s.amount,t.userUuid=s.ownerId,!0===s.eyeballDetect&&(t.allowEyeTracking=!0,t.eyeTrackingModalShow=!0),o=s.answerList,l=0;l<s.amount;l+=1)u=o[l],c=u.userAnswer,d=u.sourceQuiz,h=u.uuid,p=u.timeSpent,g=u.multipleSelect,m=u.isBlankFill,f=u.blankFillAnswer,o[l]=new St(c,d,h,p,g,m,f);t.ansSet=o,t.refreshAudio(),t.isCountTime(!0),t.tempSubmitTimer=window.setInterval((function(){""!==t.blankFillAnswer&&(t.ansSet[t.currentNum].blankFillAnswer=t.blankFillAnswer),t.tempSubmit()}),1e4),t.checkIsAllSelected(),e.next=45;break;case 35:for(t.$store.commit("updateDisplayOverlay",!0),b=Pt.example,t.quizData=b.answerList,t.amount=b.amount,w=b.answerList,v=0;v<b.amount;v+=1)y=w[v],S=y.userAnswer,k=y.sourceQuiz,x=y.uuid,T=y.timeSpent,_=y.multipleSelect,A=y.isBlankFill,C=y.blankFillAnswer,w[v]=new St(S,k,x,T,_,A,C);t.ansSet=w,t.onboardingStatus=Ut.INITIAL,t.onboardingIndex=0,t.onboardingPrevIndex=0;case 45:e.next=48;break;case 47:i===Mt["a"].SUBMMITED&&(n=_t.SUBMMITED);case 48:e.next=55;break;case 50:e.prev=50,e.t0=e["catch"](6),z=e.t0,t.errored=!0,404===z.response.status&&(n=_t.NOT_EXISTING);case 55:return e.prev=55,n!==_t.VALID&&t.$router.push({path:"/tip",query:{quizCodeStatus:"".concat(n),quizCode:t.code}}),N=t.$route.query.num,N<=t.amount&&(t.currentNum=N-1),t.blankFillAnswer=t.ansSet[t.currentNum].blankFillAnswer,t.isBlankFill=t.ansSet[t.currentNum].isBlankFill,t.$store.commit("updateLoading",!1),t.allowEyeTracking&&(t.sendQuiz(),t.startTrack(),t.startSingleQuesEyeTracking(),t.$root.$emit("bv::show::modal","modal-eyetracking","#btnShow")),e.finish(55);case 64:case"end":return e.stop()}}),e,null,[[6,50,55,64]])})))()},destroyed:function(){window.clearInterval(this.timer),window.clearInterval(this.updateSingleQuesBlankFillTimer),window.clearInterval(this.singleQuesEyeTrackingTimer)},methods:{hideEyeTrackingModal:function(){window.webgazer.showPredictionPoints(!1),this.eyeTrackingModalShow=!1,window.clearInterval(this.singleQuesEyeTrackingTimer),this.eyeTrackingResList=[],this.startSingleQuesEyeTracking()},goToCalibration:function(){this.$router.push({path:"/calibration",query:{code:"".concat(this.code)}})},sendQuiz:function(){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t.originalQuizInstance.sourceQuizGroupName),Rt.sendQuizData(t.originalQuizInstance.uuid,t.code,JSON.stringify(t.quizData),t.originalQuizInstance.sourceQuizGroupName,t.originalQuizInstance.sourceQuizGroupId);case 2:case"end":return e.stop()}}),e)})))()},sendEyeTracking:function(t,e){var n=this;return Object(V["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:Rt.sendEyeTrackingData(n.userUuid,n.code,n.ansSet[e].uuid,JSON.stringify(n.eyeTrackingResList),t,JSON.parse(JSON.stringify(n.ansSet[e].sourceQuiz)).uuid);case 1:case"end":return i.stop()}}),i)})))()},clearSingleQuesEyeTrackingRecord:function(t){this.sendEyeTracking(!1,t),window.clearInterval(this.singleQuesEyeTrackingTimer),this.eyeTrackingResList=[],this.startSingleQuesEyeTracking()},startSingleQuesEyeTracking:function(){this.singleQuesEyeTrackingTimer=window.setInterval(this.singleQuesEyeTracking,100)},singleQuesEyeTracking:function(){var t,e,n;console.log("check: ".concat(JSON.stringify(window.webgazer.checkEyesInValidationBox)));var i=null===(t=document.elementFromPoint(this.xprediction,this.yprediction))||void 0===t||null===(e=t.lastElementChild)||void 0===e||null===(n=e.lastElementChild)||void 0===n?void 0:n.innerHTML;if(null!==i&&void 0!==i&&i.length<250){var a=this.eyeTrackingResList;0===a.length?this.eyeTrackingResList[0]=[JSON.stringify(i),100]:i===a[a.length-1][0]?(a[a.length-1][1]=a[a.length-1][1]+100,this.eyeTrackingResList=a):this.eyeTrackingResList[this.eyeTrackingResList.length]=[i,100]}else if(void 0===i){console.log();var r=this.eyeTrackingResList;0===r.length?this.eyeTrackingResList[0]=["NOT_DETECTED",100]:"NOT_DETECTED"===r[r.length-1][0]?(r[r.length-1][1]=r[r.length-1][1]+100,this.eyeTrackingResList=r):this.eyeTrackingResList[this.eyeTrackingResList.length]=["NOT_DETECTED",100]}},startTrack:function(){var t=this;window.webgazer.setGazeListener((function(e,n){null!=e&&(t.xprediction=e.x,t.yprediction=e.y)})).begin(),window.webgazer.showFaceOverlay(!1),window.webgazer.showVideo(!1),window.webgazer.setVideoViewerSize(180,180)},setQuizSet:function(){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var n,i,a,r,s,o,l,u,c,d,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,It["a"].create(t.$route.query.code);case 2:for(n=e.sent,t.originalQuizInstance=n,t.quizData=n.answerList,t.amount=n.amount,t.userUuid=n.ownerId,!0===n.eyeballDetect&&(t.allowEyeTracking=!0,t.eyeTrackingModalShow=!0),i=n.answerList,a=0;a<n.amount;a+=1)r=i[a],s=r.userAnswer,o=r.sourceQuiz,l=r.uuid,u=r.timeSpent,c=r.multipleSelect,d=r.isBlankFill,h=r.blankFillAnswer,i[a]=new St(s,o,l,u,c,d,h);t.ansSet=i,t.blankFillAnswer=t.ansSet[t.currentNum].blankFillAnswer,t.isBlankFill=t.ansSet[t.currentNum].isBlankFill,t.refreshAudio(),t.isCountTime(!0),t.tempSubmitTimer=window.setInterval((function(){""!==t.blankFillAnswer&&(t.ansSet[t.currentNum].blankFillAnswer=t.blankFillAnswer),t.tempSubmit()}),1e4),t.checkIsAllSelected();case 17:case"end":return e.stop()}}),e)})))()},refreshAudio:function(){var t=this;JSON.parse(JSON.stringify(this.ansSet[this.currentNum].sourceQuiz)).enableAudio?setTimeout((function(){t.audioControl=!0}),10):this.audioControl=!1},previousBtn:function(){this.currentNum-1>-1?(this.ansSet[this.currentNum].blankFillAnswer=this.blankFillAnswer,this.blankFillAnswer="",this.currentNum-=1,this.tempSubmit(),this.androidUpdateNum(),this.refreshAudio(),this.blankFillAnswer=this.ansSet[this.currentNum].blankFillAnswer,this.isBlankFill=this.ansSet[this.currentNum].isBlankFill):this.allowFirstTip&&(this.toastContent=this.$i18n.t("已經是第一題"),this.toast("b-toaster-top-center"))},nextBtn:function(){this.currentNum+1<this.amount?(this.ansSet[this.currentNum].blankFillAnswer=this.blankFillAnswer,this.blankFillAnswer="",this.currentNum+=1,this.tempSubmit(),this.androidUpdateNum(),this.refreshAudio(),this.blankFillAnswer=this.ansSet[this.currentNum].blankFillAnswer,this.isBlankFill=this.ansSet[this.currentNum].isBlankFill,document.body.scrollTop=0,document.documentElement.scrollTop=0):this.allowLastTip&&(this.toastContent=this.$i18n.t("已經是最後一題"),this.toast("b-toaster-top-center"))},listBtn:function(){this.modalShow=!0},toast:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.allowLastTip=!1,this.allowFirstTip=!1,this.$bvToast.toast("".concat(this.toastContent),{title:this.$i18n.t("抱歉"),toaster:t,solid:!0,appendToast:n,autoHideDelay:900}),setTimeout((function(){e.allowLastTip=!0,e.allowFirstTip=!0}),1200)},updateCurrentNum:function(t){this.ansSet[this.currentNum].blankFillAnswer=this.blankFillAnswer,this.currentNum=t,this.modalShow=!1,this.androidUpdateNum(),this.blankFillAnswer=this.ansSet[this.currentNum].blankFillAnswer,this.isBlankFill=this.ansSet[this.currentNum].isBlankFill},updateSubOfAnsSet:function(t){this.ansSet[this.currentNum].userAnswer=t},submitBtn:function(){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("ansSet: ".concat(JSON.stringify(t.ansSet)," ")),n={ansSet:t.ansSet.map((function(t){return JSON.parse('{"uuid":"'.concat(t.uuid,'", "timeSpent":').concat(t.timeSpent,', "userAnswer":').concat(JSON.stringify(t.userAnswer),', "blankFillAnswer":').concat(JSON.stringify(t.blankFillAnswer),"}"))}))},t.allowEyeTracking&&(t.sendEyeTracking(!0,t.currentNum),window.clearInterval(t.singleQuesEyeTrackingTimer)),t.isCountTime(!1),window.clearInterval(t.tempSubmitTimer),t.$store.commit("updateLoading",!0),e.prev=6,e.next=9,It["a"].submit(t.$route.query.code,n);case 9:t.$store.commit("updateLoading",!1),Yt.sendAnswerReport(t.$route.query.code.toString()),t.$router.push({path:"/submitted?clientType=".concat(t.clientType,"&quizCode=").concat(t.code)}),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](6),t.isCountTime(!0),t.tempSubmitTimer=window.setInterval((function(){""!==t.blankFillAnswer&&(t.ansSet[t.currentNum].blankFillAnswer=t.blankFillAnswer),t.tempSubmit()}),1e4),Ft.log("submit error: ".concat(e.t0));case 19:case"end":return e.stop()}}),e,null,[[6,14]])})))()},tempSubmit:function(){var t={ansSet:this.ansSet.map((function(t){return JSON.parse('{"uuid":"'.concat(t.uuid,'", "timeSpent":').concat(t.timeSpent,', "userAnswer":').concat(JSON.stringify(t.userAnswer),', "blankFillAnswer":').concat(JSON.stringify(t.blankFillAnswer),"}"))}))};try{It["a"].save(this.$route.query.code,t)}catch(e){console.log(e)}},isCountTime:function(t){t?(window.clearInterval(this.timer),this.timer=null,this.timer=window.setInterval(this.addTime,100)):(window.clearInterval(this.timer),this.timer=null)},addTime:function(){this.ansSet[this.currentNum].timeSpent+=100},doubleClick:function(){console.log("double")},guideBtn:function(){this.$store.commit("updateDisplayOverlay",!0),this.onboardingStatus=Ut.MANUAL,this.onboardingIndex=0,this.onboardingPrevIndex=0,this.isCountTime(!1)},closeOnboardingBtn:function(){this.$store.commit("updateDisplayOverlay",!1),this.onboardingStatus===Ut.INITIAL&&this.setQuizSet(),this.onboardingStatus=Ut.DISABLE,this.isCountTime(!0)},onboardingNextBtn:function(){var t=this;this.onboardingIndex+=1,setTimeout((function(){t.onboardingPrevIndex+=1}),100)},onboardingPreviousBtn:function(){var t=this;this.onboardingIndex-=1,setTimeout((function(){t.onboardingPrevIndex-=1}),100)},checkIsAllSelected:function(){for(var t=this,e=0,n=0;n<this.ansSet.length;n+=1)this.checkSignleQuestion(this.ansSet[n].userAnswer)||(this.ansSet[n].isBlankFill?""===this.ansSet[n].blankFillAnswer&&(e+=1):e+=1);0===e?(this.isAllSelected=!0,this.allowAllSelectedTip&&!this.ansSet[this.currentNum].isBlankFill&&(this.allowAllSelectedTip=!1,this.$bvToast.toast("".concat(this.$i18n.t("已答完所有題目")),{toaster:"b-toaster-bottom-center",title:this.$i18n.t("完成"),solid:!0,appendToast:!1,autoHideDelay:1e3}),setTimeout((function(){t.allowAllSelectedTip=!0}),1e3))):this.isAllSelected=!1},checkSignleQuestion:function(t){for(var e=!1,n=0;n<t.length;n+=1)if(""!==t[n]&&void 0!==t[n]&&null!==t[n])return!0;return e},androidUpdateNum:function(){var t=navigator.userAgent;(t.indexOf("Android")>-1||t.indexOf("Adr")>-1)&&window.AndroidWebView.updateQuesNum(this.currentNum+1)}}}),Ht=Vt,Xt=(n("6502"),Object(y["a"])(Ht,ht,pt,!1,null,"3d2d6d9e",null)),Gt=Xt.exports,Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-top":"150px"}},[n("h1",[t._v("Well done!")]),n("h2",{staticStyle:{"margin-top":"70px"}},[t._v(" "+t._s(t.$t("繳交成功"))+" ")])])},Wt=[],Kt=i["default"].extend({components:{},mounted:function(){"rn"===this.$route.query.clientType&&window.ReactNativeWebView.postMessage("submitted")},created:function(){var t=this.$route.query.clientType,e=navigator.userAgent;(e.indexOf("Android")>-1||e.indexOf("Adr")>-1)&&"rn"!==t&&window.AndroidWebView.showResultAndVideo(),"rn"===t&&window.ReactNativeWebView.postMessage("submitted")}}),Zt=Kt,te=Object(y["a"])(Zt,Jt,Wt,!1,null,null,null),ee=te.exports,ne=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tipBody"},[i("div",[i("img",{staticClass:"mb-4",staticStyle:{"border-radius":"50%"},attrs:{src:n("b640"),alt:"",width:"70",height:"70"}}),i("br"),i("LanguageSelector",{staticClass:"mr-2"}),i("div",{staticStyle:{"margin-top":"30px"}},[t.quizCodeStatus==t.QuizStatus.SUBMMITED?i("div",[i("h2",[t._v(" "+t._s(t.$t("該測驗已完成"))+" ")]),null!=t.quizCode?i("b-button",{staticClass:"my-6",attrs:{variant:"primary"},on:{click:t.sendResultViewer}},[t._v(" "+t._s(t.$t("取得回答紀錄"))+" ")]):t._e()],1):t.quizCodeStatus==t.QuizStatus.NOT_EXISTING?i("h2",[t._v(" "+t._s(t.$t("無效答題碼"))+" ")]):t._e()])],1)])},ie=[],ae=i["default"].extend({components:{LanguageSelector:kt["a"]},data:function(){return{quizCodeStatus:"",QuizStatus:_t,quizCode:""}},computed:{},created:function(){this.$store.commit("updateLoading",!0);try{this.quizCodeStatus=this.$route.query.quizCodeStatus,this.quizCode=this.$route.query.quizCode}finally{this.$store.commit("updateLoading",!1)}},methods:{sendResultViewer:function(){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""===t.quizCode){e.next=5;break}return e.next=3,Yt.sendAnswerReport(t.quizCode);case 3:n=e.sent,window.open(n,"_blank");case 5:case"end":return e.stop()}}),e)})))()}}}),re=ae,se=(n("9469"),Object(y["a"])(re,ne,ie,!1,null,null,null)),oe=se.exports,le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-navbar",{attrs:{type:"light",variant:"light"}},[i("b-navbar-brand",[i("img",{staticStyle:{"border-radius":"50%"},attrs:{src:n("b640"),width:"28",height:"28"}}),i("span",{staticStyle:{"margin-left":"5px","font-size":"15px"}},[t._v("QSticker")])]),i("div",{staticClass:"mx-auto"},[t._v(" 眼球追踪校正 ")]),7!=t.currentStep?i("b-navbar-nav",{staticClass:"auto"},[i("b-button",{attrs:{size:"sm",variant:"dark"},on:{click:t.quitCalibration}},[t._v(" 離開校正 ")])],1):t._e()],1),0==t.currentStep?i("div",{staticClass:"step0"},[i("div",{staticStyle:{"margin-top":"2%",float:"none","margin-left":"5%","margin-right":"5%"}},[i("img",{staticStyle:{"margin-bottom":"3%"},attrs:{src:n("99f6"),width:"250",height:"180"}}),i("div",{staticStyle:{height:"310px",width:"100%","border-width":"2px 3px 2px 5px","border-radius":"90% 6% 93% 5% / 5% 94% 7% 95%",border:"dashed black 2px"}},[i("b-container",{staticStyle:{"margin-top":"30px","margin-left":"30px"}},[i("b-row",{staticStyle:{"font-size":"30px",float:"left"}},[t._v(" 說明 "),i("div",{staticStyle:{width:"100%",height:"8px",background:"#2E3A59"}})]),i("b-row",{staticStyle:{float:"left","margin-top":"30px"}},[i("div",{staticStyle:{"white-space":"nowrap","margin-top":"10px"}},[t._v(" 受環境因素影響，眼球追踪存在誤差， ")]),i("div",{staticStyle:{"white-space":"nowrap","margin-top":"10px"}},[t._v(" 為了提升準確性，需要進行校準。 ")]),i("div",{staticStyle:{"white-space":"nowrap","margin-top":"10px"}},[t._v(" 過程中請將鏡頭對準您的面部與眼睛！ ")]),i("div",{staticStyle:{"white-space":"nowrap","margin-top":"10px"}},[t._v(" 眼睛需凝視手指點選位置或游標位置。 ")]),i("div",{staticStyle:{"white-space":"nowrap","margin-top":"10px"}},[t._v(" 紅色小圓點代表偵測到的凝視坐標。 ")])])],1)],1),i("div",{staticStyle:{float:"left","margin-left":"23px","margin-top":"40px","margin-bottom":"10px"}},[i("b-button",{staticStyle:{border:"solid black 1.5px","font-weight":"bold"},attrs:{squared:"",variant:"outline-dark"},on:{click:t.startCalib}},[t._v(" 開始 → ")])],1)])]):t._e(),0!=t.currentStep&&7!=t.currentStep&&8!=t.currentStep?i("div",{staticStyle:{"margin-left":"0px","margin-right":"0px"}},[i("b-progress",{staticClass:"mb-3",attrs:{value:t.currentStep-1,max:6,variant:"dark"}})],1):t._e(),t._l(t.stepList,(function(e,n){return i("div",{key:n},[t.currentStep===n+1&&t.currentStep>0&&t.currentStep<7?i("div",[i("div",{style:e.stepStyle},[i("cycle",{on:{stepPlus:t.stepPlus}})],1)]):t._e()])})),8==t.currentStep?i("div",{staticClass:"step7"},[i("img",{staticStyle:{"margin-bottom":"3%"},attrs:{src:n("58dc"),width:"300",height:"230"}}),i("div",{staticStyle:{"font-size":"30px"}},[t._v(" 校正完成 ")]),i("div",[t._v(" 準確率："+t._s(t.precisionValue)+" ")]),i("div",{staticStyle:{float:"none","margin-top":"40px","margin-bottom":"10px"}},[i("b-button",{staticStyle:{border:"solid black 0.7x","padding-left":"50px","padding-right":"50px","font-size":"20px"},attrs:{pill:"",variant:"dark",size:"md"},on:{click:t.quitCalibration}},[t._v(" 開始測驗 ")])],1),i("div",{staticStyle:{float:"none","margin-top":"20px","text-decoration":"underline"},on:{click:t.restartCalibration}},[t._v(" 重新校正 ")])]):t._e(),7==t.currentStep?i("div",[i("b-avatar",{staticClass:"pre-center",attrs:{size:"1em"}},[i("br")]),i("div",[i("br"),t._v(" 請看圓點5秒，"),i("br"),t._v(" 計算校正後準確率"),i("br"),i("b-button",{staticStyle:{"margin-top":"20px"},attrs:{variant:"outline-dark",size:"sm"},on:{click:t.startCalculate}},[t._v(" 開始 ")])],1)],1):t._e()],2)},ue=[],ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"outside",attrs:{id:"area1"}},[n("a",{attrs:{id:"cycle"},on:{click:t.cycleClicked,dblclick:t.doubleClicked}})]),n("b-tooltip",{attrs:{show:"true",target:"area1",placement:"bottom"}},[t._v("   請凝視中間圓點並點擊"+t._s(t.clickCount)+"次   ")])],1)},de=[],he=i["default"].extend({data:function(){return{clickCount:5}},methods:{doubleClicked:function(){console.log("double clicked")},cycleClicked:function(){this.clickCount-=1,0===this.clickCount&&(this.clickCount=5,this.$emit("stepPlus"))}}}),pe=he,ge=(n("6131"),Object(y["a"])(pe,ce,de,!1,null,null,null)),me=ge.exports,fe=i["default"].extend({components:{Cycle:me},data:function(){return{code:"",currentStep:0,clickCount:5,xprediction:0,yprediction:0,stepList:[{stepStyle:"margin-top: 2%; margin-left: 2%"},{stepStyle:"margin-top: 2%; float: right; margin-right: 2%"},{stepStyle:"margin-top: 62%; float: left; margin-left: 20%"},{stepStyle:"margin-top: 62%; float: right; margin-right: 20%"},{stepStyle:"margin-top: 100%; float: left; margin-left: 20%"},{stepStyle:"margin-top: 100%; float: right; margin-right: 20%"}],precisionValue:0,past50PointsX:[],past50PointsY:[],pointsCollectTimer:null}},created:function(){this.code=this.$route.query.code,this.startTrack(),this.past50PointsX=[],this.past50PointsY=[]},methods:{startCalculate:function(){var t=this;this.past50PointsX=[],this.past50PointsY=[],this.pointsCollectTimer=setInterval(Object(V["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.webgazer.getCurrentPrediction();case 2:n=e.sent,t.past50PointsX.push(n.x),t.past50PointsY.push(n.y);case 5:case"end":return e.stop()}}),e)}))),100),setTimeout((function(){t.stopStoringPointsVariable(),window.clearInterval(t.pointsCollectTimer)}),5200)},storePointsVariable:function(){},stopStoringPointsVariable:function(){var t=[this.past50PointsX,this.past50PointsY];console.log("past50: ".concat(JSON.stringify(t))),this.precisionValue=this.calculatePrecision(t),this.currentStep=8,window.webgazer.end(),this.past50PointsX=[],this.past50PointsY=[]},calculatePrecision:function(t){var e=window.innerHeight,n=window.innerWidth,i=t[0],a=t[1],r=n/2,s=e/2,o=new Array(50);this.calculatePrecisionPercentages(o,e,i,a,r,s);var l=this.calculateAverage(o);return Math.round(l)},calculatePrecisionPercentages:function(t,e,n,i,a,r){var s=0;for(s=0;s<50;s+=1){var o=a-n[s],l=r-i[s],u=Math.sqrt(o*o+l*l),c=e/2,d=0;u<=c&&u>-1?d=100-u/c*100:u>c?d=0:u>-1&&(d=100),t[s]=d}},calculateAverage:function(t){for(var e=0,n=0;n<50;n+=1)e+=t[n];return e/=50,e},quitCalibration:function(){try{window.webgazer.end()}catch(t){console.log(t)}""===this.code||void 0===this.code||null===this.code?(console.log("empty"),this.$router.push({path:"/"})):(console.log("not empty"),this.$router.push({path:"/ing",query:{code:"".concat(this.code),allowEyeTracking:"TRUE"}}))},restartCalibration:function(){this.currentStep=0},cycleClicked:function(){this.clickCount-=1,0===this.clickCount&&(this.clickCount=5,this.currentStep+=1,7===this.currentStep&&window.webgazer.end())},stepPlus:function(){this.currentStep+=1,7===this.currentStep&&this.storePointsVariable()},startCalib:function(){this.currentStep=1},clicked:function(){console.log("clicked")},startTrack:function(){var t=this;window.webgazer.setGazeListener((function(e,n){null!=e&&(t.xprediction=e.x,t.yprediction=e.y)})).begin(),window.webgazer.showFaceOverlay(!1),window.webgazer.showVideo(!1),window.webgazer.setVideoViewerSize(1,1)},doubleClick:function(){console.log("double")}}}),be=fe,we=(n("ceba"),Object(y["a"])(be,le,ue,!1,null,null,null)),ve=we.exports;i["default"].use(x["a"]);var ye=[{path:"/",name:"Index",component:function(){return n.e("chunk-795df950").then(n.bind(null,"d701"))}},{path:"/home",name:"Home",component:dt},{path:"/quiz",name:"Quiz",component:Gt},{path:"/ing",name:"Quiz",component:Gt},{path:"/submitted",name:"Submitted",component:ee},{path:"/tip",name:"Tip",component:oe},{path:"/calibration",name:"Calibration",component:ve}],Se=new x["a"]({routes:ye}),ke=x["a"].prototype.push;x["a"].prototype.push=function(t){var e=this;return new Promise((function(n,i){ke.call(e,t,(function(){n(e.currentRoute)}),(function(t){"NavigationDuplicated"===t.name?n(e.currentRoute):i(t)}))}))};var xe=Se,Te=n("2f62");i["default"].use(Te["a"]);var _e=new Te["a"].Store({state:{stageHighlightLabel:null,stageAnswer:null,isLoading:!1,displayOverlay:!1,code:null},mutations:{updateStageHighlightLabel:function(t,e){t.stageHighlightLabel=e},updateStageHighlightLabelMulti:function(t,e){t.stageHighlightLabel=e},updateStageAnswer:function(t,e){t.stageAnswer=e},updateLoading:function(t,e){t.isLoading=e},updateDisplayOverlay:function(t,e){t.displayOverlay=e},updateQuizCode:function(t,e){t.code=e}},actions:{},modules:{}});i["default"].config.productionTip=!1,i["default"].use(l.a),i["default"].use(u["a"],d.a),i["default"].component("Loading",p.a),i["default"].use(s.a);var Ae="https://client-app.qsticker.net";if(m.a.isInClient())m.a.init({liffId:"1656074648-mqV8NOlx"}).then((function(){var t=new URL(window.location.href).searchParams.get("code"),e=new URL(window.location.href).searchParams.get("language");if(t&&e){var n="".concat(Ae,"/#/ing/?code=").concat(t,"&language=").concat(e);window.location.href=n}}));else{var Ce=new URL(window.location.href).searchParams.get("liff.state");if(Ce){var ze=decodeURIComponent(Ce),Ne="".concat(Ae,"/#/ing").concat(ze);window.location.href=Ne}}e["default"]=new i["default"]({router:xe,store:_e,i18n:Qt,render:function(t){return t(k)}}).$mount("#app")},ceba:function(t,e,n){"use strict";n("e0cb")},e0cb:function(t,e,n){},e504:function(t,e,n){"use strict";n("5c71")},e5cc:function(t,e,n){},e5d6:function(t,e,n){},edd4:function(t){t.exports=JSON.parse('{"brandname":"QSticker","答題碼":"Quiz Code","開始":"Start","答題碼不存在":"Invalid quiz code!","測驗已繳交":"The quiz was submitted!","答題碼為空，請輸入答題碼":"Please provide the quiz code!","language":"Language","繳交":"Submit","單選題":"Please select one answer.","複選題":"Please select more than one answer.","上一題":"Previous","下一題":"Next","答題進度":"Progress","目前題型:":"","題數:":"Total:","播放進度：":"","時長：":"Total: ","總題數":"Total","已完成":"Answered","待完成":"Unfinished","已經是第一題":"You are at the first question!","已經是最後一題":"You are at the last question!","抱歉":"Sorry","繳交成功":"Submitted Successfully","ConfirmModalTip":"Do you want to submit the quiz?","ConfirmModalYes":"Yes, I\'m Sure","ConfirmModalNo":"Cancel","已答完所有題目":"All questions answered","完成":"Well Done!","該測驗已完成":"The quiz is already submitted!","無效答題碼":"Invalid Quiz Code!","聲音題":"This question has an audio.","使用教學":"Guide","跳過教學":"Skip","上一個":"Previous","下一個":"Next","開始測驗":"Start the Quiz","點選您認為正確的答案。":"Select the correct answer(s).","完成一題作答後，點選「下一題」繼續測驗。":"Click \'Next\' to continue the quiz.","您可以透過答題進度，您可以了解測驗完成狀況、快速切換題號。":"Progress shows the quiz\'s completion, which can also help you switch to a particular question quickly.","完成全部題目作答後，點選「繳交」送出測驗。":"Click \'Submit\' to end the quiz.","取得回答紀錄":"Get Answer Record","填充題":"Blank Filling"}')},f121:function(t,e,n){"use strict";n("e5cc")},fd0e:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("1da1"),a=n("d4ec"),r=n("bee2"),s=(n("96cf"),n("6ad1")),o=function(){function t(){Object(a["a"])(this,t)}return Object(r["a"])(t,null,[{key:"check",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].get("answer-group/anwser-web?entranceCode=".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.status);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"create",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].get("answer-group/anwser-web?entranceCode=".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"submit",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].post("answer-group/save-Ans/".concat(e,"/submit"),n);case 2:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"save",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].post("answer-group/save-Ans/".concat(e,"/tempSubmit"),n);case 2:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"browserSubmit",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].post("answer-group/from-browser/".concat(e),n);case 2:return i=t.sent,t.abrupt("return",i.data.resultViewer);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}()},fddd:function(t,e,n){"use strict";n("605f")}});
//# sourceMappingURL=app.9b49ed45.js.map